<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="icon" type="image/x-icon" href="/images/bar-counter.png">
    <script src="https://kit.fontawesome.com/6092e90ed9.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
    <title>Ingredients Registry</title>
    <script>
      function order(e) {
        alert('Ordering ' + e.innerText.toLowerCase() + "...")
      }
      const event = new Event('ingredientsLoaded');

      // This is where the data is coming from
      // https://www.thecocktaildb.com/api/json/v1/1/list.php?i=list
      function getIngredients() {
        fetch('https://www.thecocktaildb.com/api/json/v1/1/list.php?i=list')
          .then((response) => response.json())
          .then((data) => {
            const ingredients = data.drinks.sort()
            
            // go through each ingredient and add a new list item to list
            for(let i = 0; i < ingredients.length; i++) {
              const ingredient = ingredients[i]
              createNewListItem(ingredient.strIngredient1)
            }
          });
      }

      const colors = ['#FF6633', '#FFB399', '#FF33FF', '#FFFF99', '#00B3E6', 
		  '#E6B333', '#3366E6', '#999966', '#99FF99', '#B34D4D',
		  '#80B300', '#809900', '#E6B3B3', '#6680B3', '#66991A', 
		  '#FF99E6', '#CCFF1A', '#FF1A66', '#E6331A', '#33FFCC',
		  '#66994D', '#B366CC', '#4D8000', '#B33300', '#CC80CC', 
		  '#66664D', '#991AFF', '#E666FF', '#4DB3FF', '#1AB399',
		  '#E666B3', '#33991A', '#CC9999', '#B3B31A', '#00E680', 
		  '#4D8066', '#809980', '#E6FF80', '#1AFF33', '#999933',
		  '#FF3380', '#CCCC00', '#66E64D', '#4D80CC', '#9900B3', 
		  '#E64D66', '#4DB380', '#FF4D4D', '#99E6E6', '#6666FF'];
      
      function createNewListItem(content) {
        const list = document.getElementById("ingredients");
        const li = document.createElement("li");

        // Styling
        li.style.cursor = 'pointer';
        li.style.fontWeight = 'bold';
        li.style.fontSize = '36px';
        li.style.color = 'black';
        li.style.textTransform = 'uppercase';
        li.style.borderBottom = '1px solid black';
        li.style.background = colors[Math.floor(Math.random() * 50)]
        li.classList.add('js-create-modal')
        li.id = content
        li.appendChild(document.createTextNode(content));
        list.appendChild(li);
      }

      getIngredients()

      // not open a second one before closing the first.
      let modalOpen = false;

      function createModal(html = '') {

        // Create the elements.
        const modal = document.createElement('div');
        const content = document.createElement('div');
        const close = document.createElement('span');
        
        // Add classes to the elements.
        modal.classList.add('modal');
        content.classList.add('modal-content');
        close.classList.add('close', 'js-close-modal');
        
        // Add content to the elements.
        content.insertAdjacentHTML('beforeend', html);
        close.innerHTML = '&times;';
        
        // Append children to parents and to the document.
        content.appendChild(close);
        modal.appendChild(content);
        document.body.appendChild(modal);
        
        return modal;
        
      }

      // Listen for clicks in the document.
      document.addEventListener('click', event => {

        // If the create modal button has been clicked, create a modal.
        const ingredient = event.target.closest('.js-create-modal');
        if (ingredient !== null && modalOpen === false) {
          const html = `<div>-- Ingredient --</div>`
                        +ingredient.innerHTML+
                          `
                          <div>
                            // Name
                          </div>
                          <div>
                            // Image
                          </div>
                          <div>
                            // Description
                          </div>
                          <div>
                            // Class
                          </div>
                          `
          createModal(html);
          modalOpen = true;
        }
        
        // If the close modal has been clicked, remove the modal.
        const close = event.target.closest('.js-close-modal');
        if (close !== null) {
          const modal = close.closest('.modal');
          modal.remove();
          modalOpen = false;
        }
        
      });

    </script>

</head>
<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
          <a class="navbar-brand" href="#"><i class="fa-solid fa-martini-glass-citrus"></i> </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link" aria-current="page" href="#">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Profile</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Features</a>
              </li>
              <li class="nav-item">
                <a class="nav-link">Contact</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <div style="display: flex; justify-content: center; padding-top: 1em; ">
        <div class="ingredients-registry-container" style="width: 500px;">
          <div class="ingredients-registry-header" style="background: white; position: absolute; top: 0; width: 500px">Ingredients Registry</div>
          <div id="ingredients" style="margin-top: 100px; height: 100vh; overflow: scroll" class ="ingredients-list">
        </div>
        </div>
      </div>
</body>

<script>
  
</script>
</html>
